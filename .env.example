# Rehab AI - .env.example
# Copie este arquivo para `.env` e ajuste os valores conforme seu ambiente.

# ======================
# Banco de Dados (PostgreSQL)
# ======================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=1234
POSTGRES_DB=rehabdb
# Controla o comportamento de geração do schema do Hibernate em TODOS os serviços
# none | validate | update | create | create-drop
DDL_AUTO=update

# ======================
# RabbitMQ
# ======================
RABBITMQ_USER=guest
RABBITMQ_PASS=guest

# ======================
# JWT (NUNCA use este valor em produção)
# ======================
JWT_SECRET=change-me-in-prod
JWT_EXPIRATION_MS=86400000

# ======================
# S3 / MinIO (dev)
# Para usar AWS S3 em produção, deixe S3_ENDPOINT vazio e forneça credenciais AWS reais
# ======================
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
AWS_REGION=us-east-1
S3_ENDPOINT=http://minio:9000
S3_BUCKET=rehab-files

# Se você quiser usar AWS Bedrock (apenas para LLMs), defina as credenciais AWS específicas abaixo.
# IMPORTANT: NÃO use as credenciais do MinIO aqui. Exemplo (descomente e preencha):
BEDROCK_AWS_ACCESS_KEY_ID=
BEDROCK_AWS_SECRET_ACCESS_KEY=
USE_BEDROCK=true

# ======================
# OpenTelemetry / Observabilidade
# ======================
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_EXPORTER_OTLP_PROTOCOL=grpc
TRACING_SAMPLING_PROBABILITY=1.0
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=prometheus,health,info

# ======================
# OCR / LLM (Prescription Service)
# ======================
# AWS Textract (OCR na nuvem)
USE_TEXTRACT=false

# AWS Bedrock (LLM para geração de prescrições)
BEDROCK_MODEL_ID=anthropic.claude-3-haiku

# Guardrails (validação de segurança)
GUARDRAILS_ENABLED=true

# Tesseract (OCR local)
TESSDATA_PATH=/opt/tessdata
OCR_LANG=por+eng
OCR_MAX_PAGES=5
OCR_TEXTRACT_USE_ANALYZE=true

# Heurísticas para validação de texto extraído
OCR_HEURISTIC_MIN_CHARS_NO_WS=30
OCR_HEURISTIC_MIN_LETTER_RATIO=0.15
OCR_HEURISTIC_MIN_UNIQUE_CHARS=10
OCR_HEURISTIC_MIN_NONWS_DENSITY=0.30
OCR_FALLBACK_MIN_CONFIDENCE=0.2

# Normalização com LLM (experimental)
NORMALIZATION_USE_LLM=false

# ======================
# E-mail (Notification Service) - SMTP
# Configure com suas credenciais SMTP. Use MAIL_* (notification-service reads MAIL_USER/MAIL_PASS).
# ======================
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USER=your-email@gmail.com
MAIL_PASS=your-app-password
# Endereço padrão para receber notificações (opcional). Se vazio, MAIL_USER será usado.
NOTIFICATION_TO=

# ======================
# Portas dos Serviços
# ======================
# API Gateway (ponto de entrada único)
GATEWAY_PORT=8080

# Serviços internos (acessados através do gateway)
AUTH_SERVICE_PORT=8081
USER_SERVICE_PORT=8082
FILE_SERVICE_PORT=8083
PRESCRIPTION_SERVICE_PORT=8084
NOTIFICATION_SERVICE_PORT=8085
PLAN_SERVICE_PORT=8086

# ======================
# URLs dos Serviços (para o Gateway)
# ======================
AUTH_SERVICE_URL=http://auth-service:8081
USER_SERVICE_URL=http://user-service:8082
FILE_SERVICE_URL=http://file-service:8083
PRESCRIPTION_SERVICE_URL=http://prescription-service:8084
NOTIFICATION_SERVICE_URL=http://notification-service:8085
PLAN_SERVICE_URL=http://plan-service:8086

# ======================
# AMQP / RabbitMQ (configurações avançadas)
# ======================
AMQP_FILE_EXCHANGE=file.events
AMQP_ROUTING_KEY_UPLOADED=file.uploaded
AMQP_PRESCRIPTION_QUEUE=prescription.file.uploaded
